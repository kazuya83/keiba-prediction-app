# 実行計画 06: レース関連ドメインモデル実装

## ゴール
- `requirements.md` セクション2.2/6に基づき、レース・馬・騎手などの主要モデルとDBスキーマを実装する。

## 手順
1. `backend/app/models/race.py`, `horse.py`, `jockey.py`, `trainer.py`, `weather.py` を作成し、各テーブルの列・リレーションを定義。
2. Alembicマイグレーションで上記テーブルを生成。インデックス（`race_date`, `venue`, `horse_id` 等）を設定。
3. `backend/app/schemas/race.py` 等に読み取り用スキーマを用意し、一覧・詳細に必要なフィールドを定義。
4. `backend/app/crud/race.py` などCRUD層を実装し、キャッシュ層追加を想定した抽象化を行う。
5. ダミーデータ投入スクリプト（`backend/app/seed/races.py`）を作成し、テスト用数レースを登録。
6. `backend/tests/crud/test_race.py` で主要CRUDと関連モデルの動作を検証。

## 成果物
- レース関連モデルとマイグレーションファイル。
- CRUD + スキーマ + サンプルデータ投入スクリプト。
- テストデータを用いたCRUDテスト。

## 依存・前提
- 計画03でDB接続、計画04でユーザーモデルが存在している。
- DBサービスが起動済みでマイグレーションを流せる状態。

## リスクと対策
- **リスク**: モデルの循環依存。  
  **対策**: ファイル分割とリレーション定義を慎重に行い、`__init__` でモデル登録。
- **リスク**: マイグレーション失敗。  
  **対策**: `alembic --sql` でSQLを確認し、ステージングDBで事前検証。*** End Patch

